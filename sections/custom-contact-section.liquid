{% comment %} contact-template.liquid {% endcomment %}

<div class="contact-page">
  <!-- Dynamic Hero Section -->
  <section class="contact-hero" style="background: {{ section.settings.hero_bg_gradient }};">
    <div class="hero-content">
      <h1>{{ section.settings.hero_title }}</h1>
      <p>{{ section.settings.hero_subtitle }}</p>
      <div class="hero-icons">
        {% for i in (1..3) %}
          {% assign icon_setting = 'hero_icon_' | append: i %}
          {% if section.settings[icon_setting] != blank %}
            <div class="icon-bounce {% if forloop.index == 2 %}delay-1{% elsif forloop.index == 3 %}delay-2{% endif %}">
              {{ section.settings[icon_setting] | replace: '<svg', '<svg width="30" height="30"' }}
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <div class="hero-image">
      {% if section.settings.hero_image != blank %}
        {{ section.settings.hero_image | image_url: width: 600 | image_tag: loading: 'lazy', alt: section.settings.hero_title }}
      {% endif %}
    </div>
  </section>

  <!-- Main Contact Container -->
  <div class="custom-contact-container">
    <!-- Dynamic Contact Info -->
    <section class="contact-info">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'contact_info' %}
            <div class="info-item" style="background: {{ block.settings.bg_color }};">
              <div class="info-icon {{ block.settings.animation_style }}">
                {{ block.settings.icon_svg | replace: '<svg', '<svg width="35" height="35"' }}
              </div>
              <h3>{{ block.settings.title }}</h3>
              {% if block.settings.link_url != blank %}
                <a href="{{ block.settings.link_url }}" style="color: {{ block.settings.text_color }};">
                  {{ block.settings.content }}
                </a>
              {% else %}
                <p style="color: {{ block.settings.text_color }};">{{ block.settings.content }}</p>
              {% endif %}
            </div>
        {% endcase %}
      {% endfor %}
    </section>

    <!-- Contact Form (remains unchanged) -->
    {% form 'contact' %}
      <section class="contact-form-section">
      <div class="form-decoration left">
        <img src="{{ 'toy-cloud.png' | asset_url }}" alt="Toy cloud" class="float-slow">
      </div>
      
      {% form 'contact' %}
        {% if form.posted_successfully? %}
          <div class="contact-success">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>
            <h3>Hooray! Message Sent!</h3>
            <p>Our toy experts will get back to you soon!</p>
          </div>
        {% endif %}

        {{ form.errors | default_errors | replace: 'errors', 'oops! some fields need attention' }}

        <div class="contact-form">
          <h2 class="form-title">Send a Message to Toyland</h2>
          
          <div class="form-row">
            <div class="form-group">
              <label for="ContactFormName">Your Name</label>
              <input type="text" id="ContactFormName" name="contact[name]" required placeholder="e.g. Rohan or Priya">
              <div class="input-decoration teddy"></div>
            </div>
            <div class="form-group">
              <label for="ContactFormEmail">Email Address</label>
              <input type="email" id="ContactFormEmail" name="contact[email]" required placeholder="your@email.com">
              <div class="input-decoration rocket"></div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="ContactFormPhone">Phone Number</label>
              <input type="tel" id="ContactFormPhone" name="contact[phone]" placeholder="+91 _________">
              <div class="input-decoration car"></div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group full-width">
              <label for="ContactFormMessage">Your Message</label>
              <textarea rows="6" id="ContactFormMessage" name="contact[body]" required placeholder="Tell us about your toy questions or ideas..."></textarea>
              <div class="input-decoration blocks"></div>
            </div>
          </div>

          <button type="submit" class="submit-btn">
            <span>Send Message</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>
          </button>
        </div>
      {% endform %}
      
      <div class="form-decoration right">
        <img src="{{ 'toy-balloon.png' | asset_url }}" alt="Toy balloon" class="float-fast">
      </div>
    </section>
    {% endform %}

    <!-- Dynamic Map Section -->
    <section class="map-section">
      <h2>{{ section.settings.map_title }}</h2>
      <div class="map-container">
        {% if section.settings.map_embed_code != blank %}
          {{ section.settings.map_embed_code }}
        {% else %}
          <iframe src="{{ section.settings.map_url }}" 
                  width="100%" height="400" style="border:0;" 
                  allowfullscreen="" loading="lazy"></iframe>
        {% endif %}
        <div class="map-marker">
          {% if section.settings.map_marker_svg != blank %}
            {{ section.settings.map_marker_svg | replace: '<svg', '<svg width="50" height="50"' }}
          {% else %}
            <img src="{{ section.settings.map_marker_image | image_url: width: 50 }}" alt="Store location">
          {% endif %}
        </div>
      </div>
      {% if section.settings.store_hours != blank %}
        <div class="store-hours">
          <h3>{{ section.settings.store_hours_title }}</h3>
          {{ section.settings.store_hours }}
        </div>
      {% endif %}
    </section>
  </div>
</div>

{% schema %}
{
  "name": "Contact Page",
  "settings": [
    {
      "type": "header",
      "content": "Hero Section"
    },
    {
      "type": "text",
      "id": "hero_title",
      "label": "Hero Title",
      "default": "Let's Play Together!"
    },
    {
      "type": "text",
      "id": "hero_subtitle",
      "label": "Hero Subtitle",
      "default": "Got questions about our magical toys? Our friendly team is here to help!"
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero Image"
    },
    {
      "type": "html",
      "id": "hero_icon_1",
      "label": "Hero Icon 1 (SVG code)",
      "default": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><path d='M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z'/></svg>"
    },
    {
      "type": "html",
      "id": "hero_icon_2",
      "label": "Hero Icon 2 (SVG code)"
    },
    {
      "type": "html",
      "id": "hero_icon_3",
      "label": "Hero Icon 3 (SVG code)"
    },
    {
      "type": "text",
      "id": "hero_bg_gradient",
      "label": "Hero Background Gradient",
      "default": "linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)"
    },
    {
      "type": "header",
      "content": "Map Section"
    },
    {
      "type": "text",
      "id": "map_title",
      "label": "Map Section Title",
      "default": "Find Our Toy Store"
    },
    {
      "type": "text",
      "id": "map_url",
      "label": "Google Maps URL",
      "info": "Alternative to embed code"
    },
    {
      "type": "html",
      "id": "map_embed_code",
      "label": "Map Embed Code",
      "info": "Will override the URL if both are provided"
    },
    {
      "type": "html",
      "id": "map_marker_svg",
      "label": "Map Marker SVG Code"
    },
    {
      "type": "image_picker",
      "id": "map_marker_image",
      "label": "Map Marker Image",
      "info": "Alternative to SVG"
    },
    {
      "type": "text",
      "id": "store_hours_title",
      "label": "Store Hours Title",
      "default": "Store Hours"
    },
    {
      "type": "richtext",
      "id": "store_hours",
      "label": "Store Hours",
      "default": "<p><strong>Monday-Friday:</strong> 10AM - 7PM</p><p><strong>Saturday:</strong> 9AM - 8PM</p><p><strong>Sunday:</strong> 11AM - 6PM</p>"
    }
  ],
  "blocks": [
    {
      "type": "contact_info",
      "name": "Contact Information",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Visit Us"
        },
        {
          "type": "text",
          "id": "content",
          "label": "Content",
          "default": "123 Main Street, New Delhi, India"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL",
          "info": "Optional - for email or phone links"
        },
        {
          "type": "html",
          "id": "icon_svg",
          "label": "Icon SVG Code",
          "default": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'><path d='M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z'/></svg>"
        },
        {
          "type": "select",
          "id": "animation_style",
          "label": "Animation Style",
          "options": [
            {
              "value": "spin",
              "label": "Spin"
            },
            {
              "value": "float",
              "label": "Float"
            },
            {
              "value": "shake",
              "label": "Shake"
            },
            {
              "value": "none",
              "label": "None"
            }
          ],
          "default": "spin"
        },
        {
          "type": "color",
          "id": "bg_color",
          "label": "Background Color",
          "default": "#7b5cfa"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color",
          "default": "#ffffff"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Default Contact Page",
      "settings": {
        "hero_title": "Let's Play Together!",
        "hero_subtitle": "Got questions about our magical toys? Our friendly team is here to help!",
        "hero_bg_gradient": "linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)",
        "map_title": "Find Our Toy Store",
        "store_hours_title": "Store Hours"
      },
      "blocks": [
        {
          "type": "contact_info",
          "settings": {
            "title": "Visit Our Toyland",
            "content": "123 Play Street, New Delhi, India",
            "icon_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'><path d='M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z'/></svg>",
            "animation_style": "spin",
            "bg_color": "#7b5cfa",
            "text_color": "#ffffff"
          }
        },
        {
          "type": "contact_info",
          "settings": {
            "title": "Send a Toygram",
            "content": "play@toyland.com",
            "link_url": "mailto:play@toyland.com",
            "icon_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><path d='M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z'/></svg>",
            "animation_style": "float",
            "bg_color": "#7b5cfa",
            "text_color": "#ffffff"
          }
        },
        {
          "type": "contact_info",
          "settings": {
            "title": "Call the Toy Hotline",
            "content": "+91 12345 67890",
            "link_url": "tel:+911234567890",
            "icon_svg": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><path d='M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z'/></svg>",
            "animation_style": "shake",
            "bg_color": "#7b5cfa",
            "text_color": "#ffffff"
          }
        }
      ]
    }
  ]
}
{% endschema %}
<!-- Include CSS -->
{{ 'contact-form.css' | asset_url | stylesheet_tag }}