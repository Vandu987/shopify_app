{% comment %}
  Main About Page Template
  Includes:
  - Dynamic hero section
  - Our story section
  - Team members
  - Testimonials
  - Gallery
{% endcomment %}

{% section 'dynamic-hero' %}

<div class="about-page-container">
  <!-- Our Story Section -->
  <section class="about-section">
    <div class="section-content">
      <h2>{{ section.settings.story_title }}</h2>
      <div class="rte">{{ section.settings.story_content }}</div>
    </div>
    {% if section.settings.story_image %}
    <div class="section-image">
      {{ section.settings.story_image | image_url: width: 800 | image_tag: loading: 'lazy' }}
    </div>
    {% endif %}
  </section>

  <!-- Team Members -->
  <section class="team-section">
    <h2>{{ section.settings.team_title }}</h2>
    <div class="team-grid">
      {% for block in section.blocks %}
        {% if block.type == 'team_member' %}
          <div class="team-card">
            <div class="team-image">
              {{ block.settings.image | image_url: width: 400 | image_tag: loading: 'lazy' }}
            </div>
            <div class="team-info">
              <h3>{{ block.settings.name }}</h3>
              <p class="role">{{ block.settings.position }}</p>
              <div class="rte">{{ block.settings.bio }}</div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </section>

  <!-- Testimonials -->
  <section class="testimonials">
    <h2>{{ section.settings.testimonials_title }}</h2>
    <div class="testimonial-slider">
      {% for block in section.blocks %}
        {% if block.type == 'testimonial' %}
          <div class="testimonial-card">
            <div class="testimonial-content">
              {{ block.settings.content }}
            </div>
            <p class="author">- {{ block.settings.author }}</p>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </section>

  <!-- Gallery Section -->
  <section class="gallery-section">
    <h2>{{ section.settings.gallery_title }}</h2>
    <div class="gallery-grid">
      {% for block in section.blocks %}
        {% if block.type == 'gallery_image' %}
          <div class="gallery-item">
            {{ block.settings.image | image_url: width: 600 | image_tag: loading: 'lazy' }}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </section>
</div>

{% schema %}
{
  "name": "About Page",
  "settings": [
    {
      "type": "header",
      "content": "Story Section"
    },
    {
      "type": "text",
      "id": "story_title",
      "label": "Story Title",
      "default": "Our Story"
    },
    {
      "type": "richtext",
      "id": "story_content",
      "label": "Story Content",
      "default": "<p>Share your brand's story and mission here.</p>"
    },
    {
      "type": "image_picker",
      "id": "story_image",
      "label": "Story Image"
    },
    {
      "type": "header",
      "content": "Team Section"
    },
    {
      "type": "text",
      "id": "team_title",
      "label": "Team Title",
      "default": "Meet Our Team"
    },
    {
      "type": "header",
      "content": "Testimonials"
    },
    {
      "type": "text",
      "id": "testimonials_title",
      "label": "Testimonials Title",
      "default": "What People Say"
    },
    {
      "type": "header",
      "content": "Gallery"
    },
    {
      "type": "text",
      "id": "gallery_title",
      "label": "Gallery Title",
      "default": "Behind the Scenes"
    }
  ],
  "blocks": [
    {
      "type": "team_member",
      "name": "Team Member",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name",
          "default": "Team Member"
        },
        {
          "type": "text",
          "id": "position",
          "label": "Position",
          "default": "Toy Expert"
        },
        {
          "type": "richtext",
          "id": "bio",
          "label": "Bio",
          "default": "<p>Add a short bio here.</p>"
        }
      ]
    },
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "richtext",
          "id": "content",
          "label": "Testimonial Content",
          "default": "<p>This is an amazing store!</p>"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author",
          "default": "Happy Customer"
        }
      ]
    },
    {
      "type": "gallery_image",
      "name": "Gallery Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "About Page",
      "category": "Pages"
    }
  ]
}
{% endschema %}

<style>
  /* Base Styles */
  .about-page-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  /* Section Styles */
  .about-section {
    display: flex;
    align-items: center;
    gap: 40px;
    margin: 80px 0;
  }

  .section-content {
    flex: 1;
    min-width: 300px;
  }

  .section-image {
    flex: 1;
    min-width: 300px;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  }

  /* Team Section */
  .team-section {
    margin: 80px 0;
    text-align: center;
  }

  .team-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-top: 40px;
  }

  .team-card {
    background: white;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    transition: transform 0.3s ease;
  }

  .team-card:hover {
    transform: translateY(-10px);
  }

  .team-image {
    height: 300px;
  }

  .team-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .team-info {
    padding: 20px;
    text-align: center;
  }

  .role {
    color: #47B8E0;
    font-weight: 600;
    margin: 10px 0;
  }

  /* Testimonials */
  .testimonials {
    margin: 80px 0;
    text-align: center;
  }

  .testimonial-slider {
    max-width: 800px;
    margin: 40px auto 0;
  }

  .testimonial-card {
    background: white;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    margin: 0 20px;
  }

  .author {
    margin-top: 20px;
    font-weight: 600;
    color: #FF5E7D;
  }

  /* Gallery */
  .gallery-section {
    margin: 80px 0;
    text-align: center;
  }

  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 40px;
  }

  .gallery-item {
    border-radius: 20px;
    overflow: hidden;
    height: 300px;
  }

  .gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .gallery-item:hover img {
    transform: scale(1.05);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .about-section {
      flex-direction: column;
    }
    
    .team-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  // Initialize testimonial slider
  document.addEventListener('DOMContentLoaded', function() {
    if (document.querySelector('.testimonial-slider')) {
      $('.testimonial-slider').slick({
        dots: true,
        arrows: false,
        autoplay: true,
        autoplaySpeed: 5000
      });
    }
  });
</script>